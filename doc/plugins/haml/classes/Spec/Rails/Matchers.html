<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Spec::Rails::Matchers</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Spec::Rails::Matchers</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/vendor/gems/rspec-rails-1_2_7_1/lib/spec/rails/matchers/ar_be_valid_rb.html">
                vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/ar_be_valid.rb
                </a>
        <br />
                <a href="../../../files/vendor/gems/rspec-rails-1_2_7_1/lib/spec/rails/matchers/assert_select_rb.html">
                vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/assert_select.rb
                </a>
        <br />
                <a href="../../../files/vendor/gems/rspec-rails-1_2_7_1/lib/spec/rails/matchers/have_text_rb.html">
                vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/have_text.rb
                </a>
        <br />
                <a href="../../../files/vendor/gems/rspec-rails-1_2_7_1/lib/spec/rails/matchers/include_text_rb.html">
                vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/include_text.rb
                </a>
        <br />
                <a href="../../../files/vendor/gems/rspec-rails-1_2_7_1/lib/spec/rails/matchers/redirect_to_rb.html">
                vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/redirect_to.rb
                </a>
        <br />
                <a href="../../../files/vendor/gems/rspec-rails-1_2_7_1/lib/spec/rails/matchers/render_template_rb.html">
                vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/render_template.rb
                </a>
        <br />
                <a href="../../../files/vendor/gems/rspec-rails-1_2_7_1/lib/spec/rails/matchers_rb.html">
                vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Spec::Rails::Expectations::Matchers provides several expectation matchers
intended to work with Rails components like models and responses. For
example:
</p>
<pre>
  response.should redirect_to(&quot;some/url&quot;) #redirect_to(url) is the matcher.
</pre>
<p>
In addition to those you see below, the arbitrary predicate feature of
RSpec makes the following available as well:
</p>
<pre>
  response.should be_success #passes if response.success?
  response.should be_redirect #passes if response.redirect?
</pre>
<p>
<a href="../../Note.html">Note</a> that many of these matchers are part of
a wrapper of <tt>assert_select</tt>, so the documentation comes straight
from that with some slight modifications. <tt>assert_select</tt> is a <a
href="../Test/Unit.html">Test::Unit</a> extension originally contributed to
the Rails community as a plugin by Assaf Arkin and eventually shipped as
part of Rails.
</p>
<p>
For more info on <tt>assert_select</tt>, see the relevant Rails
documentation.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M002183">be_valid</a>&nbsp;&nbsp;
      <a href="#M002187">have_rjs</a>&nbsp;&nbsp;
      <a href="#M002184">have_tag</a>&nbsp;&nbsp;
      <a href="#M002190">have_text</a>&nbsp;&nbsp;
      <a href="#M002191">include_text</a>&nbsp;&nbsp;
      <a href="#M002192">redirect_to</a>&nbsp;&nbsp;
      <a href="#M002193">render_template</a>&nbsp;&nbsp;
      <a href="#M002188">send_email</a>&nbsp;&nbsp;
      <a href="#M002189">with_encoded</a>&nbsp;&nbsp;
      <a href="#M002185">with_tag</a>&nbsp;&nbsp;
      <a href="#M002186">without_tag</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M002183" class="method-detail">
        <a name="M002183"></a>

        <div class="method-heading">
          <a href="#M002183" class="method-signature">
          <span class="method-name">be_valid</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
:call-seq:
</p>
<pre>
  response.should be_valid
  response.should_not be_valid
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002183-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002183-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/ar_be_valid.rb, line 39</span>
39:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">be_valid</span>
40:           <span class="ruby-constant">ArBeValid</span>.<span class="ruby-identifier">new</span>
41:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002187" class="method-detail">
        <a name="M002187"></a>

        <div class="method-heading">
          <a href="#M002187" class="method-signature">
          <span class="method-name">response.should have_rjs(*args, &block)<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
wrapper for assert_select_rjs
</p>
<p>
see documentation for assert_select_rjs at <a
href="http://api.rubyonrails.org">api.rubyonrails.org</a>/
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002187-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002187-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/assert_select.rb, line 146</span>
146:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">have_rjs</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
147:         <span class="ruby-constant">AssertSelect</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:assert_select_rjs</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
148:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002184" class="method-detail">
        <a name="M002184"></a>

        <div class="method-heading">
          <a href="#M002184" class="method-signature">
          <span class="method-name">response.should have_tag(*args, &block)<br />
string.should have_tag(*args, &block)<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
wrapper for assert_select with additional support for using css selectors
to set expectation on Strings. Use this in helper specs, for example, to
set expectations on the results of helper methods. Also allow specification
of how the response is parsed using the options :xml and :strict options.
By default, these options are set to false.
</p>
<h2>Examples</h2>
<pre>
  # in a controller spec
  response.should have_tag(&quot;div&quot;, &quot;some text&quot;)

  # to force xml and/or strict parsing of the response
  response.should have_tag(&quot;div&quot;, &quot;some text&quot;, :xml =&gt; true)
  response.should have_tag(&quot;div&quot;, &quot;some text&quot;, :strict =&gt; true)
  response.should have_tag(&quot;div&quot;, &quot;some text&quot;, :xml =&gt; true, :strict =&gt; false)

  # in a helper spec (person_address_tag is a method in the helper)
  person_address_tag.should have_tag(&quot;input#person_address&quot;)
</pre>
<p>
see documentation for assert_select at <a
href="http://api.rubyonrails.org">api.rubyonrails.org</a>/
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002184-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002184-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/assert_select.rb, line 112</span>
112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">have_tag</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
113:         <span class="ruby-ivar">@__current_scope_for_assert_select</span> = <span class="ruby-constant">AssertSelect</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:assert_select</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
114:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002190" class="method-detail">
        <a name="M002190"></a>

        <div class="method-heading">
          <a href="#M002190" class="method-signature">
          <span class="method-name">response.should have_text(expected)<br />
response.should_not have_text(expected)<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accepts a String or a Regexp, matching a String using == and a Regexp using
=~.
</p>
<p>
If response_or_text has a body, then that is used as to match against else
it uses response_or_text
</p>
<p>
Use this instead of <tt>response.should <a
href="Matchers.html#M002184">have_tag</a>()</tt> when you want to match the
whole string or whole body
</p>
<h2>Examples</h2>
<pre>
  response.should have_text(&quot;This is the expected text&quot;)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002190-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002190-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/have_text.rb, line 51</span>
51:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">have_text</span>(<span class="ruby-identifier">text</span>)
52:         <span class="ruby-constant">HaveText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>)
53:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002191" class="method-detail">
        <a name="M002191"></a>

        <div class="method-heading">
          <a href="#M002191" class="method-signature">
          <span class="method-name">response.should include_text(expected)<br />
response.should_not include_text(expected)<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accepts a String, matching using include?
</p>
<p>
Use this instead of <tt>response.should <a
href="Matchers.html#M002190">have_text</a>()</tt> when you either
don&#8216;t know or don&#8216;t care where on the page this text appears.
</p>
<h2>Examples</h2>
<pre>
  response.should include_text(&quot;This text will be in the actual string&quot;)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002191-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002191-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/include_text.rb, line 48</span>
48:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include_text</span>(<span class="ruby-identifier">text</span>)
49:         <span class="ruby-constant">IncludeText</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>)
50:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002192" class="method-detail">
        <a name="M002192"></a>

        <div class="method-heading">
          <a href="#M002192" class="method-signature">
          <span class="method-name">response.should redirect_to(url)<br />
response.should redirect_to(:action => action_name)<br />
response.should redirect_to(:controller => controller_name, :action => action_name)<br />
response.should_not redirect_to(url)<br />
response.should_not redirect_to(:action => action_name)<br />
response.should_not redirect_to(:controller => controller_name, :action => action_name)<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Passes if the response is a redirect to the url, action or
controller/action. Useful in controller specs (integration or isolation
mode).
</p>
<h2>Examples</h2>
<pre>
  response.should redirect_to(&quot;path/to/action&quot;)
  response.should redirect_to(&quot;http://test.host/path/to/action&quot;)
  response.should redirect_to(:action =&gt; 'list')
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002192-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002192-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/redirect_to.rb, line 120</span>
120:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">opts</span>)
121:         <span class="ruby-constant">RedirectTo</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">opts</span>)
122:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002193" class="method-detail">
        <a name="M002193"></a>

        <div class="method-heading">
          <a href="#M002193" class="method-signature">
          <span class="method-name">response.should render_template(template)<br />
response.should_not render_template(template)<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
For use in controller code examples (integration or isolation mode).
</p>
<p>
Passes if the specified template (view file) is rendered by the response.
This file can be any view file, including a partial. However if it is a
partial it must be rendered directly i.e. you can&#8216;t detect that a
partial has been rendered as part of a view using <a
href="Matchers.html#M002193">render_template</a>. For that you should use a
message expectation (mock) instead:
</p>
<pre>
  controller.should_receive(:render).with(:partial =&gt; 'path/to/partial')
</pre>
<p>
<tt>template</tt> can include the controller path. It can also include an
optional extension, which you only need to use when there is ambiguity.
</p>
<p>
<a href="../../Note.html">Note</a> that partials must be spelled with the
preceding underscore.
</p>
<h2>Examples</h2>
<pre>
  response.should render_template('list')
  response.should render_template('same_controller/list')
  response.should render_template('other_controller/list')

  # with extensions
  response.should render_template('list.rjs')
  response.should render_template('list.haml')
  response.should render_template('same_controller/list.rjs')
  response.should render_template('other_controller/list.rjs')

  # partials
  response.should render_template('_a_partial')
  response.should render_template('same_controller/_a_partial')
  response.should render_template('other_controller/_a_partial')
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002193-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002193-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/render_template.rb, line 117</span>
117:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render_template</span>(<span class="ruby-identifier">path</span>)
118:         <span class="ruby-constant">RenderTemplate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-ivar">@controller</span>)
119:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002188" class="method-detail">
        <a name="M002188"></a>

        <div class="method-heading">
          <a href="#M002188" class="method-signature">
          <span class="method-name">response.should send_email(*args, &block)<br />
</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
wrapper for assert_select_email
</p>
<p>
see documentation for assert_select_email at <a
href="http://api.rubyonrails.org">api.rubyonrails.org</a>/
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002188-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002188-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/assert_select.rb, line 156</span>
156:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">send_email</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
157:         <span class="ruby-constant">AssertSelect</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:assert_select_email</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
158:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002189" class="method-detail">
        <a name="M002189"></a>

        <div class="method-heading">
          <a href="#M002189" class="method-signature">
          <span class="method-name">with_encoded</span><span class="method-args">(*args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
wrapper for assert_select_encoded
</p>
<p>
see documentation for assert_select_encoded at <a
href="http://api.rubyonrails.org">api.rubyonrails.org</a>/
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002189-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002189-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/assert_select.rb, line 163</span>
163:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_encoded</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
164:         <span class="ruby-identifier">should</span> <span class="ruby-constant">AssertSelect</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:assert_select_encoded</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
165:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002185" class="method-detail">
        <a name="M002185"></a>

        <div class="method-heading">
          <a href="#M002185" class="method-signature">
          <span class="method-name">with_tag</span><span class="method-args">(*args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
wrapper for a nested assert_select
</p>
<pre>
  response.should have_tag(&quot;div#form&quot;) do
    with_tag(&quot;input#person_name[name=?]&quot;, &quot;person[name]&quot;)
  end
</pre>
<p>
see documentation for assert_select at <a
href="http://api.rubyonrails.org">api.rubyonrails.org</a>/
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002185-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002185-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/assert_select.rb, line 123</span>
123:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_tag</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
124:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">prepare_args</span>(<span class="ruby-identifier">args</span>, <span class="ruby-ivar">@__current_scope_for_assert_select</span>)
125:         <span class="ruby-ivar">@__current_scope_for_assert_select</span>.<span class="ruby-identifier">should</span> <span class="ruby-identifier">have_tag</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
126:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M002186" class="method-detail">
        <a name="M002186"></a>

        <div class="method-heading">
          <a href="#M002186" class="method-signature">
          <span class="method-name">without_tag</span><span class="method-args">(*args, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
wrapper for a nested assert_select with false
</p>
<pre>
  response.should have_tag(&quot;div#1&quot;) do
    without_tag(&quot;span&quot;, &quot;some text that shouldn't be there&quot;)
  end
</pre>
<p>
see documentation for assert_select at <a
href="http://api.rubyonrails.org">api.rubyonrails.org</a>/
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M002186-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M002186-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/gems/rspec-rails-1.2.7.1/lib/spec/rails/matchers/assert_select.rb, line 135</span>
135:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">without_tag</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
136:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">prepare_args</span>(<span class="ruby-identifier">args</span>, <span class="ruby-ivar">@__current_scope_for_assert_select</span>)
137:         <span class="ruby-ivar">@__current_scope_for_assert_select</span>.<span class="ruby-identifier">should_not</span> <span class="ruby-identifier">have_tag</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
138:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>